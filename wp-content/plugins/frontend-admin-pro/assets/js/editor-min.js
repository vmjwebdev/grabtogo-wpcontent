!function(e){e("body").on("click",".sub-fields-close",(function(){e(this).removeClass("sub-fields-close").addClass("sub-fields-open"),removePopup(type)})),e("body").on("click",".new-fea-form",(function(t){$link=e(this).data("link"),window.open($link,"_blank")})),e("body").on("click",".edit-fea-form",(function(t){t.stopPropagation();var n=e(this).parents(".elementor-control").siblings(".elementor-control-admin_forms_select").find("select[data-setting=admin_forms_select]").val();$link=e(this).data("link"),window.open($link+"?post="+n+"&action=edit","_blank")}));const t=elementor.modules.controls.Select2.extend({onReady:async function(){if(this.controlSelect=this.$el.find(".custom-control-select"),this.savedValue=this.$el.find(".saved-value").val(),!feaRestData)return;const e=this.controlSelect.data("action");if(!e)return;if(feaRestData[e]){const t=this.getOptions(feaRestData[e]);return void this.controlSelect.select2({data:t})}this.controlSelect.select2({data:[{id:0,text:"Loading..."}],placeholder:"Loading Options..."});const t=await fetch(feaRestData.url+"frontend-admin/v1/"+e,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":feaRestData.nonce}}),n=await t.json();feaRestData[e]=n;const o=this.getOptions(n);this.controlSelect.select2({data:o}),this.controlSelect.find('option[value="0"]').remove(),this.savedValue&&this.controlSelect.val(this.savedValue),this.controlSelect.on("change",(()=>{this.saveValue()}))},getOptions:function(e){const t=this.savedValue.split(",");this.controlSelect.data("children_of");return e.map((e=>{let n=!1;if(t.includes(e.id)&&(n=!0),e.children){if(null)return;e.children=e.children.map((e=>{let n=!1;return t.includes(e.id)&&(n=!0),{id:e.id,text:e.text,selected:n}}))}else e.id&&t.includes(e.id)&&(n=!0),e.selected=n;return e}))},saveValue:function(){let e=this.controlSelect.val();this.setValue(e)}});elementor.addControlView("fea_select",t)}(jQuery);